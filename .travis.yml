language: node_js
node_js:
  - "11"
git:
  depth: false
cache:
  directories:
    â€” node_modules
install:
  - yarn
before_script:
  - yarn mock &
script:
  - yarn test
  - yarn lint
after_script:
  - yarn mock:stop
deploy:
  provider: script
  before_script:
    - echo -e "$NPM_USER\n$NPM_EMAIL" | yarn login
    - yarn build
  script:
    - echo "publish here"
  after_script:
    - yarn logout
  skip_cleanup: true
  on:
    branch: publish
    # tags: true
